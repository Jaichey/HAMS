target/
pom.xml.tag
pom.xml.releaseBackup
pom.xml.versionsBackup
pom.xml.next
release.properties
dependency-reduced-pom.xml
buildNumber.properties
.mvn/timing.properties
# https://maven.apache.org/wrapper/#usage-without-binary-jar
.mvn/wrapper/maven-wrapper.jar

# Eclipse m2e generated files
# Eclipse Core
.project
# JDT-specific (Eclipse Java Development Tools)
.classpath


minikube start --driver=docker
kubectl create namespace jenkins
kubectl create sa jenkins -n jenkins
kubectl create token jenkins -n jenkins --duration=8760h
kubectl create rolebinding jenkins-admin-binding --clusterrole=admin --serviceaccount=jenkins:jenkins --namespace=jenkins
kubeclt get nodes
kubectl get pods --watch
kubectl config view

pipeline {
  agent {
    kubernetes {
      yaml '''
        apiVersion: v1
        kind: Pod
        spec:
          containers:
          - name: maven
            image: maven:alpine
            command:
            - cat
            tty: true
        '''
    }
  }
  stages {
    stage('Run maven') {
      steps {
        container('maven') {
          sh 'mvn -version'
        }
      }
    }
  }
}

kubectl apply -f k8s/
kubectl get pods
kubectl get svc

kubectl apply -f nagios/
kubectl get pods
kubectl get svc

In:
C:\Program Files\NSClient++\nsclient.ini
Set:
allowed hosts = 127.0.0.1,192.168.1.20
Restart NSClient++:
Restart-Service nscp
Inside /etc/nagios/nrpe.cfg:
allowed_hosts=127.0.0.1,192.168.1.20


compose
version: "3.9"

services:

  app:
    container_name: hams-app
    build:
      context: .
      dockerfile: Dockerfile
    restart: always
    ports:
      - "8080:8080"
    environment:
      DB_HOST: db
      DB_USER: root
      DB_PASSWORD: rootpass
    depends_on:
      - db

  db:
    container_name: hams-db
    image: mysql:8.0
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: rootpass
      MYSQL_DATABASE: hams
    volumes:
      - db-data:/var/lib/mysql
    ports:
      - "3306:3306"

  redis:
    container_name: hams-redis
    image: redis:latest
    restart: always
    ports:
      - "6379:6379"

  nginx:
    container_name: hams-nginx
    image: nginx:latest
    restart: always
    depends_on:
      - app
    ports:
      - "80:80"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro

volumes:
  db-data:

events {}

http {
    server {
        listen 80;
        location / {
            proxy_pass http://app:8080;
        }
    }
}

docker-compose up -d

docker-compose down

docker-compose build --no-cache

docker exec -it hams-app bash
mvn clean package
docker-compose up -d --build
